#
# Copyright 2008, IM Kit Team.
# Distributed under the terms of the MIT License.
#
# Authors:
#		Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
#

SubDir TOP protocols GoogleTalk ;

SubDirSysHdrs [ FDirName $(TOP) ] ;
SubDirSysHdrs [ FDirName $(TOP) libs ] ;
SubDirSysHdrs [ FDirName $(TOP) libs libexpat ] ;
SubDirSysHdrs [ FDirName $(TOP) libs libjabber ] ;
SubDirSysHdrs [ FDirName $(TOP) protocols Jabber ] ;
SubDirSysHdrs [ FDirName $(IMKIT_OPENSSL_INCDIR) ] ;

AddOn gtalk :
	GoogleTalk.cpp
	: be $(TARGET_LIBSTDC++) libim.so libexpat.a libjabber.a ssl crypto
	: GoogleTalk.rdef ProtocolTemplate.rdef
;

Depends gtalk : libexpat.a ;
Depends gtalk : libjabber.a ;
Depends gtalk : libim.so ;

if $(IMKIT_IS_HAIKU)  = 1 {
	LINKFLAGS on gtalk += -lnetwork ;
}

if $(IMKIT_IS_BEOS) = 1 {
	LINKFLAGS on gtalk += -lsocket ;
}

if $(IMKIT_IS_ZETA) = 1 {
	LINKFLAGS on gtalk += -lsocket -lbind ;
	SubDirHdrs /boot/develop/headers/be/bone ;
}

LINKFLAGS on gtalk += -L$(IMKIT_OPENSSL_LIBDIR) ;

InstallLib $(IMKIT_COMMON_ADDONS_DIRECTORY)/im_kit/protocols : gtalk ;

if $(IMKIT_IS_ZETA) = 1 {
	SVGIcon gtalk : [ FDirName $(TOP) icons imkit protocols GoogleTalk.svg ] ;
}

Package imkit :
	gtalk :
	[ FSplitPath $(IMKIT_COMMON_ADDONS_DIRECTORY)/imkit/protocols ]
;
