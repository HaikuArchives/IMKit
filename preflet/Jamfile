#
# Copyright 2008, IM Kit Team.
# Distributed under the terms of the MIT License.
#
# Authors:
#		Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
#

SubDir IMKIT_TOP preflet ;

SubDirHdrs [ FDirName $(IMKIT_TOP) ] ;

Executable InstantMessaging :
	main.cpp
	PApplication.cpp
	PWindow.cpp
	PView.cpp
	PCardView.cpp
	PSettingsOverview.cpp
	PServerOverview.cpp
	PProtocolsOverview.cpp
	PClientsOverview.cpp
	PClientView.cpp
	PAccountsView.cpp
	PAccountDialog.cpp
	PUtils.cpp
	SettingsController.cpp
	SettingsInfo.cpp
	ViewFactory.cpp
	: be stdc++.r4 translation textencoding libim.so libcommon.a
	: preflet.rdef
;

Depends InstantMessaging : libcommon.a ;
Depends InstantMessaging : libim.so ;

if $(IMKIT_IS_ZETA) = 1 {
	LINKFLAGS on InstantMessaging += -lzeta -ltracker ;
}

if $(IMKIT_IS_ZETA) = 1 {
	SVGIcon InstantMessaging : [ FDirName $(IMKIT_TOP) icons imkit InstantMessaging.svg ] ;
}

InstallBin $(IMKIT_PREFERENCES_DIRECTORY) : InstantMessaging ;
InstallSymlink $(IMKIT_USER_PREFERENCES_DIRECTORY)/InstantMessaging : $(IMKIT_PREFERENCES_DIRECTORY)/InstantMessaging ;
