#
# Copyright 2008, IM Kit Team.
# Distributed under the terms of the MIT License.
#
# Authors:
#		Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
#

SubDir IMKIT_TOP libs libjabber ;

SubDirHdrs [ FDirName $(IMKIT_TOP) libs ] ;
if $(IMKIT_HAVE_OPENSSL) = 1 {
	SubDirHdrs [ FDirName $(IMKIT_OPENSSL_INCDIR) ] ;
}

SEARCH_SOURCE += [ FDirName $(IMKIT_TOP) libs libexpat ] ;

SubDirC++Flags -DSTDOUT=1 ;

local sources =
	# libjabber
	JabberAgent.cpp
	JabberContact.cpp
	JabberElement.cpp
	JabberHandler.cpp
	JabberMessage.cpp
	JabberPresence.cpp
	JabberRegistration.cpp
	JabberSocketPlug.cpp
	SHA1.cpp
	# libexpat
	xmlparse.c
	xmlrole.c
	xmltok.c
;

if $(IMKIT_HAVE_OPENSSL) = 1 {
	sources += JabberSSLPlug.cpp ;
}

StaticLibrary libjabber.a : $(sources) ;

Depends libjabber.a : libexpat.a ;
