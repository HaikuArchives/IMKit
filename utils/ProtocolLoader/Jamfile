#
# Copyright 2008, IM Kit Team.
# Distributed under the terms of the MIT License.
#
# Authors:
#		Michael Davidson <slaad@bong.com.au>
#		Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
#

SubDir IMKIT_TOP utils ProtocolLoader ;

SubDirHdrs [ FDirName $(IMKIT_TOP) ] ;
SubDirHdrs [ FDirName $(IMKIT_TOP) server ] ;
SubDirHdrs [ FDirName $(IMKIT_OPENSSL_INCDIR) ] ;

Executable ProtocolLoader :
	main.cpp
	ProtocolLoaderApplication.cpp
	: be stdc++.r4 libim.so libcommon.a ssl crypto
	: ProtocolLoader.rdef
;

Depends ProtocolLoader : libcommon.a ;
Depends ProtocolLoader : libim.so ;

if $(IMKIT_IS_ZETA) = 1 {
	LINKFLAGS on ProtocolLoader += -lzeta -ltracker ;
}

LINKFLAGS on ProtocolLoader += -L$(IMKIT_OPENSSL_LIBDIR) ;

InstallLib $(IMKIT_APPS_DIRECTORY)/im_kit : ProtocolLoader ;
