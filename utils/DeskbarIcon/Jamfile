#
# Copyright 2008, IM Kit Team.
# Distributed under the terms of the MIT License.
#
# Authors:
#		Pier Luigi Fiorini <pierluigi.fiorini@gmail.com>
#

SubDir TOP utils DeskbarIcon ;

SubDirSysHdrs [ FDirName $(TOP) ] ;

# SVN revision
local svnRevisionFile = [ FGristFiles svn_revision ] ;
MakeLocate $(svnRevisionFile) : $(LOCATE_TARGET) ;
CreateSVNRevisionFile $(svnRevisionFile) ;

C++FLAGS += -fpermissive ;

Application IMDeskbarIcon :
	AccountInfo.cpp
	AwayMessageWindow.cpp
	DeskbarIconApp.cpp
	DeskbarIcon.cpp
	QueryLooper.cpp
	svn_revision.cpp
	: be $(TARGET_LIBSTDC++) libim.so libcommon.a
	: DeskbarIcon.rdef DeskbarIcons.rdef
;

Depends IMDeskbarIcon : libcommon.a ;
Depends IMDeskbarIcon : libim.so ;

if $(IMKIT_IS_ZETA) = 1 {
	LINKFLAGS on IMDeskbarIcon += -lzeta -ltracker ;
}

InstallLib $(IMKIT_APPS_DIRECTORY)/im_kit : IMDeskbarIcon ;

Package imkit :
	IMDeskbarIcon :
	[ FSplitPath $(IMKIT_APPS_DIRECTORY)/im_kit ]
;
